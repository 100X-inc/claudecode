---
tags:
  - research
  - claude-code
  - progressive-disclosure
  - implementation
created: 2026-01-11
source: web-researcher
---

# Progressive Disclosure - 実装パターン

## 概要

Progressive Disclosureを実践するための具体的な実装パターンとディレクトリ構成を解説する。

## CLAUDE.mdでの実装

### 基本原則

CLAUDE.mdは**最小限**に保ち、タスク固有の情報は別ファイルに分離する。

```
プロジェクト/
├── CLAUDE.md              # 簡潔な概要と参照リスト
├── agent_docs/            # 詳細ドキュメント
│   ├── building_the_project.md
│   ├── running_tests.md
│   ├── code_conventions.md
│   ├── service_architecture.md
│   ├── database_schema.md
│   └── service_communication_patterns.md
└── .claude/
    └── rules/             # モジュール化されたルール
        ├── testing.md
        └── formatting.md
```

### CLAUDE.mdの書き方

```markdown
# プロジェクト名

## 概要
このプロジェクトは〇〇を行うWebアプリケーション。

## クイックリファレンス
- ビルド: `npm run build`
- テスト: `npm test`
- リント: `npm run lint`

## 詳細ドキュメント
- **ビルド手順**: [agent_docs/building_the_project.md](agent_docs/building_the_project.md)
- **テスト戦略**: [agent_docs/running_tests.md](agent_docs/running_tests.md)
- **コーディング規約**: [agent_docs/code_conventions.md](agent_docs/code_conventions.md)
- **アーキテクチャ**: [agent_docs/service_architecture.md](agent_docs/service_architecture.md)

## 重要ルール
- ES Modules構文を使用（CommonJSは不可）
- コミットメッセージは日本語で記述
```

### ポインタ優先戦略

コード片をコピーするのではなく、**ファイル:行番号**の参照で正規の情報源を指し示す。

```markdown
## 認証処理
認証の実装詳細は `src/auth/handler.ts:45-120` を参照。
```

**利点**: 内容の陳腐化を防ぎ、常に最新のコードを参照できる。

## Agent Skillsでの実装

### パターン1: 高レベルガイドと参照

```markdown
---
name: pdf-processing
description: PDFファイルからテキストや表を抽出し、フォーム入力やマージを行う。
---

# PDF Processing

## クイックスタート

pdfplumberでテキスト抽出:
```python
import pdfplumber
with pdfplumber.open("file.pdf") as pdf:
    text = pdf.pages[0].extract_text()
```

## 高度な機能

**フォーム入力**: [FORMS.md](FORMS.md) を参照
**APIリファレンス**: [REFERENCE.md](REFERENCE.md) を参照
**使用例**: [EXAMPLES.md](EXAMPLES.md) を参照
```

### パターン2: ドメイン別構成

```
bigquery-skill/
├── SKILL.md (概要とナビゲーション)
└── reference/
    ├── finance.md (収益、請求メトリクス)
    ├── sales.md (商談、パイプライン)
    ├── product.md (API使用状況)
    └── marketing.md (キャンペーン)
```

```markdown
# BigQuery Data Analysis

## 利用可能なデータセット

- **Finance**: 収益、ARR、請求 → [reference/finance.md](reference/finance.md)
- **Sales**: 商談、パイプライン → [reference/sales.md](reference/sales.md)
- **Product**: API使用状況 → [reference/product.md](reference/product.md)
- **Marketing**: キャンペーン → [reference/marketing.md](reference/marketing.md)

## クイック検索

```bash
grep -i "revenue" reference/finance.md
grep -i "pipeline" reference/sales.md
```
```

### パターン3: 条件付き詳細

基本的な内容を表示し、高度な内容は必要時にリンク参照。

```markdown
# DOCX Processing

## ドキュメント作成
新規作成には docx-js を使用。詳細は [DOCX-JS.md](DOCX-JS.md)。

## ドキュメント編集
単純な編集: XMLを直接修正

**変更履歴付き編集**: [REDLINING.md](REDLINING.md) を参照
**OOXML詳細**: [OOXML.md](OOXML.md) を参照
```

## ファイルインポート機能

CLAUDE.mdは `@path/to/file.md` 構文で他のファイルをインポートできる。

```markdown
# プロジェクトCLAUDE.md

@agent_docs/common_rules.md
@agent_docs/api_reference.md

## プロジェクト固有の指示
...
```

**注意**: インポートは最大5階層まで再帰可能。

## 参照の深さ制限

参照は**1階層**に留める。深いネストはClaudeが部分的にしかファイルを読まない原因となる。

```markdown
# 悪い例（深すぎる）
SKILL.md → advanced.md → details.md → 実際の情報

# 良い例（1階層）
SKILL.md
  ├→ advanced.md（詳細情報）
  ├→ reference.md（API参照）
  └→ examples.md（使用例）
```

## 長いファイルには目次を

100行を超える参照ファイルには、先頭に目次を配置。

```markdown
# API Reference

## 目次
- 認証とセットアップ
- コアメソッド（create, read, update, delete）
- 高度な機能（バッチ操作、Webhook）
- エラーハンドリング
- コード例

## 認証とセットアップ
...
```

## 関連ノート

- [[00_概要]] - Progressive Disclosureの基本概念
- [[02_ベストプラクティス]] - 公式推奨事項
- [[03_コンテキスト最適化]] - トークン最適化

## ソース

- [Skill authoring best practices - Claude Docs](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/best-practices) - 取得日: 2026-01-11
- [Writing a good CLAUDE.md | HumanLayer Blog](https://www.humanlayer.dev/blog/writing-a-good-claude-md) - 取得日: 2026-01-11
- [Manage Claude's memory - Claude Code Docs](https://code.claude.com/docs/en/memory) - 取得日: 2026-01-11
